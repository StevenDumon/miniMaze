==================
Application server
==================

1. Install NginX web server : sudo apt-get install nginx
   Start NginX : sudo service nginx start
   Test that it's working (should see "Welcome to nginx!")
   Stop NginX  : sudo service nginx stop

2. Install PHP
   sudo apt-get install php-common php-cli php-fpm
   Verify the installed PHP version with php --version
     result showing e.g. PHP 8.3.6 indicates php8.3 !

   The MySQLi extension is often available by default with PHP.
   If not, then make sure to install it using the below commands explicitly:
	sudo apt-get install php-mysqli
   Test met (output mag niet leeg zijn...) :
	php -m | grep mysqli

3. Configure NGINX for PHP
   In your nginx site configuration, /etc/nginx/sites-available/default, add index.php
     index index.html index.htm to index index.php index.html index.htm

   Scroll down to where it says "location ~ .php {" and uncomment lines so it looks like this:
      location ~ \.php$ {
	  fastcgi_split_path_info ^(.+\.php)(/.+)$;
	  # fastcgi_pass 127.0.0.1:9000;
	  fastcgi_index index.php;
	  include fastcgi_params;
	}
 
    Check status of nginx service : systemctl service nginx.services
    Reboot or restart services (check php versie) :
      sudo service php8.3-fpm restart
      sudo service nginx restart

4. Folder permissions
   Permissions for www folders
	cd /var/www
	sudo chown -R <username> html


===============
Database server
===============

1. Install MySQL :
	sudo apt install mysql-server
   Test MySQL after installation
	sudo mysql -u root -p
	show databases;
	show tables;
	exit;
   Check MySQL version :
	mysql --version

2. Add database user
	sudo mysql -u root -p
	CREATE USER 'Theseus'@'%' IDENTIFIED BY 'Theseus';
	GRANT ALL PRIVILEGES ON *.* TO 'Theseus'@'%' WITH GRANT OPTION;
   Vervang oude GRANT ALL PRIVILEGES ON *.* TO 'Theseus'@'%' IDENTIFIED BY 'password';
   ...waarin % = wildcard
   Check user :
	SELECT user FROM mysql.user;

3. Create database and test table :
	sudo mysql -u root -p
	CREATE DATABASE minimaze;
	show databases;
	use minimaze;

   Create test table :
	CREATE TABLE Persons (
    	testID int,
    	testDescription varchar(255)
	);

4. Test database local access
	sudo mysql -u root -p
	SHOW tables;
	USE minimaze;
	INSERT INTO minimaze (testID, testDescription) VALUES (1, 'Test description 1');

5. Most default installs of MySQL only listen to the local machine.
   Allow remote access to database: check for bind-address in /etc/mysql/mysql.conf.d/mysqld.cnf
   and comment line 127.0.0.1
   Look for the bind-address setting in my.cnf on the server, and make sure it's listening on the IP address you're targetting.
   You may also need to ensure skip-networking isn't switched on!
   For MySql version 8.0.13 and above, and MariaDB version 10.11 and above, you can specify
   a list of comma-separated IP addresses.
	bind-address = 10.0.0.1,10.0.1.1,10.0.2.1
   wher restarting fails met 0.0.0.0, add [...] above the IP:
	[mysqld]
	bind-address = 0.0.0.0

6. Additional information
   In order to create user with privileges other than localhost, % is wildcard :
	CREATE USER ‘testuser’@’%’ IDENTIFIED BY ‘password’;
   and grant privileges
	GRANT ALL PRIVILEGES ON *.* TO ‘testuser'@'%' IDENTIFIED BY 'password' WITH GRANT OPTION MAX_QUERIES_PER_HOUR 0 MAX_CONNECTIONS_PER_HOUR 0 MAX_UPDATES_PER_HOUR 0 MAX_USER_CONNECTIONS 0 ;
   restart after modification of bind tables, …
	sudo service mysql restart


===============
MySQL Workbench
===============

1. Download installer op https://mysql.com/downloads, in section 'MySQL Community (GPL) Downloads
   Selecteer MySQL Workbench, Operating System is Ubuntu Linux (check met commando "more /etc/os-release" in terminal)

2. Installatie in stap 3 faalt wanneer dependency 'libmysqlclient21' nog niet geïnstalleerd is :
	sudo apt --fix-broken install
	sudo apt install libmysqlclient21

3. Installeer vanuit Downloads folder met
	sudo dpkg -i mysql-workbench-community_<versienummer> (autocomplete met Tab)

4. Configure MySQL Workbench
   Klik op '+' naast MySQL Connections
   Connection name 'minimaze' voorusername 'Theseus', store password (hetzelfde) in keychain
   Test Connection




